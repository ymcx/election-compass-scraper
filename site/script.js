COUNTY = {
  "AP": [3.000000, 2.000000, 1.0000000, 2.0000000, 2.0000000, 2.000000, 2.0000000, 3.000000, 2.0000000, 0.0000000, 2.0000000, 2.0000000, 3.000000, 2.000000, 0.0000000, 2.0000000, 2.0000000, 2.000000, 3.000000, 1.000000, 2.0000000, 3.0000000, 2.0000000, 2.000000, 3.0000000],
  "EOP": [2.700000, 2.600000, 0.2000000, 0.4000000, 0.8000000, 1.400000, 2.2000000, 2.800000, 2.9000000, 0.1000000, 2.8000000, 2.4000000, 2.900000, 1.800000, 0.4000000, 0.7000000, 0.9000000, 2.800000, 3.000000, 2.800000, 2.7000000, 0.9000000, 0.4000000, 2.800000, 3.0000000],
  "KD": [2.025105, 1.416318, 1.8702929, 1.4811715, 1.2949791, 1.374477, 1.4916318, 2.564854, 1.0753138, 1.3096234, 0.9456067, 1.2238494, 2.353556, 2.317992, 1.0481172, 1.5460251, 1.2573222, 1.696653, 1.688285, 2.422594, 0.6631799, 1.4330544, 1.0418410, 1.836820, 1.2405858],
  "Kesk": [2.308911, 1.473267, 1.5247525, 1.4940594, 1.1356436, 1.375248, 1.7980198, 2.503960, 1.2326733, 0.7495050, 1.7772277, 1.1000000, 2.386139, 2.336634, 1.2742574, 1.4148515, 0.9039604, 1.764356, 1.912871, 2.663366, 0.8960396, 0.7475248, 0.5465347, 1.787129, 1.5475248],
  "Kok": [1.977444, 1.086884, 2.2623225, 1.9624060, 1.6081871, 1.345029, 1.9423559, 2.433584, 0.9983292, 0.7936508, 1.6758563, 0.9281537, 2.301587, 2.117794, 1.5279866, 1.5096074, 1.6624896, 1.261487, 1.960735, 2.268170, 0.3600668, 1.9289891, 1.5196324, 1.771094, 1.5730994],
  "KriP": [2.500000, 2.000000, 1.8333333, 0.6666667, 0.8333333, 2.166667, 0.8333333, 2.333333, 0.5000000, 0.6666667, 0.8333333, 1.6666667, 2.500000, 2.000000, 0.6666667, 2.0000000, 0.8333333, 2.833333, 2.000000, 3.000000, 0.6666667, 1.6666667, 0.1666667, 2.500000, 0.8333333],
  "Lib": [2.108696, 1.108696, 1.6956522, 1.7826087, 1.8695652, 1.717391, 2.0652174, 2.347826, 1.0217391, 0.8478261, 1.9347826, 0.7391304, 2.173913, 1.760870, 1.6304348, 1.3913043, 2.3695652, 1.347826, 2.543478, 1.956522, 1.9565217, 2.6086957, 1.6521739, 2.413043, 1.9130435],
  "Liik": [2.418919, 1.567568, 1.9324324, 1.1756757, 1.1486486, 1.513514, 1.4729730, 2.324324, 0.8918919, 0.6756757, 1.6756757, 1.4189189, 2.594595, 2.418919, 0.8918919, 1.5270270, 1.2972973, 1.540541, 1.959459, 2.581081, 0.9459459, 2.0945946, 0.9459459, 2.472973, 1.4189189],
  "PS": [2.129956, 1.522026, 1.8568282, 1.5781938, 1.2367841, 1.415198, 0.7323789, 2.733480, 0.2180617, 1.3678414, 0.6013216, 0.6696035, 2.246696, 2.312775, 1.0517621, 1.5814978, 1.3204846, 1.798458, 1.389868, 2.571586, 0.3711454, 1.6960352, 1.3094714, 2.127753, 0.5385463],
  "RKP": [2.377049, 1.463115, 1.7090164, 1.1926230, 1.1352459, 1.454918, 2.2090164, 2.651639, 2.0491803, 0.4098361, 2.1639344, 2.3729508, 2.618852, 2.319672, 1.0000000, 1.1106557, 1.1967213, 1.627049, 2.143443, 2.684426, 1.1024590, 0.8565574, 0.9672131, 1.745902, 2.0737705],
  "SDP": [2.751515, 2.133333, 1.0545455, 1.3298701, 1.3082251, 1.296104, 1.7515152, 2.535931, 1.8770563, 0.3212121, 2.2510823, 1.4025974, 2.634632, 2.516017, 1.1454545, 1.0571429, 0.9385281, 1.968831, 2.406061, 2.509957, 1.1861472, 1.0311688, 0.4857143, 1.931602, 2.0952381],
  "Sit": [2.330435, 1.791304, 1.5043478, 1.6260870, 1.2347826, 1.347826, 1.6173913, 2.504348, 1.4260870, 0.6260870, 1.7739130, 1.0869565, 2.513043, 2.486957, 0.8782609, 1.2869565, 0.9913043, 1.869565, 2.052174, 2.582609, 1.0695652, 1.1565217, 0.5826087, 2.234783, 1.6521739],
  "SKP": [2.764706, 3.000000, 0.4117647, 0.7647059, 1.0000000, 1.647059, 1.7058824, 2.470588, 2.6470588, 0.0000000, 2.7647059, 2.2941176, 2.823529, 2.882353, 0.3529412, 0.4705882, 0.1764706, 2.941176, 2.882353, 2.705882, 2.6470588, 0.8235294, 0.2352941, 2.647059, 2.7058824],
  "Vas": [2.741497, 2.621315, 0.7052154, 1.1156463, 1.0963719, 1.354875, 1.6848073, 2.463719, 2.4342404, 0.1451247, 2.6927438, 1.6360544, 2.759637, 2.683673, 0.7664399, 0.8197279, 0.7233560, 2.586168, 2.766440, 2.603175, 2.2018141, 0.8786848, 0.2494331, 2.217687, 2.5612245],
  "Vihr": [2.511392, 2.074684, 1.1367089, 1.4240506, 1.4949367, 1.307595, 2.1101266, 2.348101, 2.3101266, 0.1746835, 2.6860759, 1.3886076, 2.730380, 2.432911, 1.1924051, 0.9708861, 1.1759494, 2.121519, 2.726582, 2.448101, 2.1050633, 1.4405063, 0.5177215, 2.239241, 2.7126582],
  "VKK": [2.307692, 2.000000, 1.0769231, 0.6923077, 1.2307692, 1.769231, 0.5384615, 2.615385, 0.6153846, 1.6923077, 0.1538462, 0.6153846, 2.692308, 2.307692, 0.3846154, 2.0769231, 1.2307692, 2.384615, 1.307692, 2.538462, 0.6923077, 0.9230769, 0.6153846, 2.153846, 0.1538462],
  "VL": [2.491228, 2.000000, 1.4736842, 0.8771930, 0.8245614, 1.649123, 0.5438596, 2.596491, 0.3859649, 1.5438596, 0.2982456, 1.0175439, 2.421053, 2.438596, 0.8245614, 1.4035088, 1.2456140, 2.298246, 1.438596, 2.631579, 0.5263158, 0.9298246, 0.5614035, 2.350877, 0.2631579],
}

MUNICIPAL = {
  "AP": [3.000000, 0.0000000, 3.0000000, 3.000000, 2.0000000, 3.0000000, 0.00000000, 0.0000000, 0.0000000, 3.0000000, 0.0000000, 0.0000000, 0.0000000, 3.000000, 0.0000000, 0.0000000, 2.0000000, 3.000000, 3.0000000, 0.0000000, 3.0000000, 0.0000000, 3.0000000, 0.0000000, 3.0000000],
  "EOP": [2.900000, 0.5000000, 2.3000000, 1.700000, 0.6000000, 3.0000000, 0.30000000, 0.5000000, 0.5000000, 1.2000000, 0.2000000, 0.5000000, 1.3000000, 3.000000, 0.0000000, 0.0000000, 2.9000000, 2.500000, 2.8000000, 0.2000000, 2.7000000, 0.2000000, 2.3000000, 0.2000000, 2.7000000],
  "KD": [2.362928, 1.1666667, 1.7149533, 2.454829, 1.7959502, 0.5794393, 2.85825545, 1.9735202, 1.6713396, 1.7196262, 1.0623053, 1.2227414, 0.9719626, 1.691589, 1.0155763, 1.3395639, 0.8177570, 2.051402, 1.8566978, 0.9080997, 1.4781931, 1.0264798, 0.9750779, 1.1993769, 0.1915888],
  "Kesk": [2.232442, 1.0570410, 1.5244207, 2.008200, 1.6021390, 0.6417112, 2.15971480, 1.9026738, 1.7550802, 1.6998217, 0.9825312, 0.9294118, 0.9194296, 1.454189, 1.0274510, 1.3714795, 1.0627451, 2.101248, 2.0427807, 1.0039216, 1.7272727, 0.9543672, 1.0748663, 1.1654189, 1.2035651],
  "Kok": [2.228702, 1.5897772, 1.7100262, 1.580275, 1.1041940, 0.8496068, 1.99017038, 2.4436435, 2.1815203, 1.1949541, 0.9442988, 1.3443644, 1.0593054, 1.733290, 1.1159895, 1.4642857, 1.1415465, 1.832896, 2.0022936, 1.0819135, 1.6051769, 1.0232634, 1.0422674, 1.3224115, 1.3938401],
  "KriP": [2.333333, 0.3333333, 1.0000000, 2.666667, 2.0000000, 1.0000000, 2.33333333, 2.3333333, 1.0000000, 2.3333333, 0.6666667, 1.6666667, 1.0000000, 2.000000, 0.6666667, 1.3333333, 0.0000000, 3.000000, 0.0000000, 2.6666667, 1.0000000, 2.0000000, 1.6666667, 0.3333333, 0.0000000],
  "Lib": [2.021739, 1.9239130, 2.1086957, 0.923913, 0.5434783, 1.6195652, 0.64130435, 2.7173913, 2.0978261, 0.5869565, 0.3804348, 2.0543478, 0.7391304, 2.413043, 1.0869565, 1.1413043, 1.7500000, 1.739130, 2.2282609, 0.9021739, 1.2173913, 0.9891304, 0.6847826, 1.5869565, 2.2173913],
  "Liik": [2.443478, 1.1130435, 1.7739130, 1.721739, 1.2869565, 0.6956522, 1.98260870, 2.2347826, 1.9217391, 1.4434783, 1.0000000, 1.4434783, 0.8347826, 1.791304, 1.0782609, 1.3826087, 0.9565217, 2.156522, 1.8782609, 1.1478261, 1.6086957, 1.1304348, 1.2521739, 1.0782609, 1.2782609],
  "PS": [2.388955, 1.0552257, 1.0629454, 1.872922, 1.4394299, 0.2036817, 2.39845606, 2.3865796, 1.9121140, 1.8325416, 0.8735154, 1.3580760, 0.8687648, 1.463777, 1.1656770, 1.7903800, 0.2363420, 1.980998, 0.8188836, 2.3307601, 0.7351544, 2.1549881, 0.5944181, 1.1959620, 0.2226841],
  "RKP": [2.305317, 1.2178388, 2.7838765, 1.674099, 1.1372213, 1.1012007, 1.79759863, 1.9931389, 1.8970840, 1.7941681, 0.9759863, 1.2487136, 0.8867925, 1.946827, 0.9056604, 0.9656947, 1.8181818, 2.240137, 2.4957118, 0.3825043, 2.1989708, 0.4614065, 1.3945111, 1.0823328, 2.2847341],
  "SDP": [2.573464, 1.2201872, 1.8437118, 1.679691, 1.2067562, 1.2560033, 1.58363858, 1.3406593, 1.1990232, 1.9975580, 0.9454619, 0.9312169, 1.3121693, 2.220594, 0.8624339, 1.1111111, 1.6630037, 2.338217, 2.2307692, 0.6288156, 2.1147741, 0.6280016, 1.5836386, 0.8974359, 2.1676842],
  "Sit": [2.324773, 1.0090634, 1.5513595, 1.950151, 1.4456193, 0.9244713, 1.76132931, 1.8021148, 1.5422961, 1.7734139, 0.7885196, 0.9486405, 0.9184290, 2.009063, 0.7794562, 1.0921450, 1.1042296, 2.154079, 1.9365559, 1.0981873, 1.7024169, 1.0740181, 1.1359517, 1.0332326, 1.4048338],
  "SKP": [2.863636, 0.3181818, 2.3636364, 2.045455, 0.9545455, 2.3636364, 0.09090909, 0.6818182, 0.2272727, 2.6818182, 0.3636364, 0.4545455, 1.6818182, 2.863636, 0.3181818, 0.4545455, 2.5909091, 2.863636, 2.7727273, 0.1363636, 2.7272727, 0.1818182, 2.4090909, 0.3636364, 2.7272727],
  "Vas": [2.713301, 0.7822192, 2.0654721, 1.768436, 1.0537560, 2.0089593, 0.77601654, 0.7201930, 0.6753963, 2.3115093, 0.5499655, 0.7153687, 1.3886975, 2.679531, 0.4093728, 0.6657478, 2.2598208, 2.663680, 2.5864921, 0.2529290, 2.5320469, 0.2763611, 2.0620262, 0.5079256, 2.6609235],
  "Vihr": [2.627558, 1.0620737, 2.1364256, 1.467940, 0.8587995, 2.3744884, 0.94747613, 1.1323329, 1.3867667, 1.7339700, 0.4311050, 1.0893588, 1.1678035, 2.869031, 0.3028649, 0.4495225, 2.5068213, 2.482265, 2.6507503, 0.1889495, 2.4890859, 0.2646658, 1.8533424, 0.8390177, 2.7633015],
  "VKK": [2.400000, 0.2000000, 0.3000000, 2.500000, 1.8000000, 0.2000000, 2.60000000, 2.5000000, 1.6000000, 2.4000000, 0.8000000, 1.3000000, 0.2000000, 1.600000, 1.3000000, 1.2000000, 0.0000000, 2.200000, 1.2000000, 2.4000000, 1.2000000, 2.1000000, 1.3000000, 0.7000000, 0.3000000],
  "VL": [2.459016, 0.6885246, 0.8852459, 2.131148, 1.3770492, 0.1803279, 2.24590164, 2.2950820, 1.8196721, 2.0655738, 0.7868852, 1.5245902, 0.4754098, 1.639344, 1.1475410, 1.6065574, 0.1311475, 2.147541, 0.5901639, 2.4590164, 0.6229508, 2.2786885, 0.7704918, 1.1311475, 0.1475410],
}

function calculate_mses(elections, answers) {
  const mses = []
  for (const [party, values] of Object.entries(elections)) {
    let mse = 0
    let count = 0
    for (let i = 0; i < 25; ++i) {
      if (answers[i] == null) {
        continue
      }
      mse += (values[i] - answers[i]) ** 2
      ++count
    }
    mses.push([party, mse / count])
  }
  return mses
}

function minimum(values) {
  return values.reduce((min, cur) => {
    return cur[1] < min[1] ? cur : min
  })[0]
}

function get_answers() {
  const answers = []
  for (let i = 0; i < 25; ++i) {
    const selected = document.querySelector(`input[name="q${i}"]:checked`)
    answers.push(selected ? selected.value : null)
  }
  return answers
}

function submit(elections) {
  const answers = get_answers()
  const mses = calculate_mses(elections, answers)
  const party = minimum(mses)
  window.open(party)
}
